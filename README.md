[![](https://jitpack.io/v/zkmopro/NoirKotlin.svg)](https://jitpack.io/#zkmopro/NoirKotlin)

# Mopro Kotlin Package

A Kotlin/Android library for generating and verifying zero-knowledge proofs (ZKPs) using native Rust code via UniFFI and JNI. This package provides a simple interface to interact with proof systems such as Circom and Halo2, supporting multiple proof libraries (e.g., Arkworks, Rapidsnark).

## Getting mopro via JitPack

To get this library from GitHub using [JitPack](https://jitpack.io/#zkmopro/NoirKotlin):

**Step 1.** Add the JitPack repository to your `settings.gradle.kts` at the end of repositories:

```kotlin
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        mavenCentral()
        maven { url = uri("https://jitpack.io") }
    }
}
```

**Step 2.** Add the dependency to your `build.gradle.kts`:

```kotlin
  dependencies {
      implementation("com.github.zkmopro:NoirKotlin:Tag")
  }
```

Replace `Tag` with the desired release version, e.g. `v0.1.0`. See the [JitPack page](https://jitpack.io/#zkmopro/NoirKotlin) for available versions.

**Note:** If you're using an Android template from `mopro create`, comment out these UniFFI dependencies in your build file to prevent duplicate class errors.

```kotlin
  // // Uniffi
  // implementation("net.java.dev.jna:jna:5.13.0@aar")
  // implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4")
```

## Usage Example

### Import the package

```kotlin
import uniffi.mopro.generateNoirProof
import uniffi.mopro.verifyNoirProof
import uniffi.mopro.getNoirVerificationKey
```

### Load circuit and srs

Please checkout [noir-rs](https://github.com/zkmopro/noir-rs) to see how to generate the circuit and the srs.

To load the circuit and srs in an Android app, please checkout [`getFilePathFromAssets`](https://github.com/zkmopro/mopro/blob/9beb03cd2da06690304977e8e3e5b4c9990aa101/cli/src/template/android/app/src/main/java/com/example/moproapp/MainActivity.kt#L31) to get the path. Then define the file path, e.g.

```kotlin
val circuitFile = getFilePathFromAssets("noir_multiplier2.json")
val srsFile = getFilePathFromAssets("noir_multiplier2.srs")
```

### `getNoirVerificationKey`

```kotlin
val onChain = true  // Use Keccak for Solidity compatibility
val lowMemoryMode = false
val vk = getNoirVerificationKey(circuitFile, srsFile, onChain, lowMemoryMode)
```

### `generateNoirProof`

```kotlin
val inputs = listOf("3", "5")
val proof = generateNoirProof(
    circuitFile,
    srsFile,
    inputs,
    onChain,
    vk,
    lowMemoryMode
)
```

### `verifyNoirProof`

```kotlin
val result = verifyNoirProof(
    circuitFile,
    proof,
    onChain,
    vk,
    lowMemoryMode
)
```

## How to Build the Package

This package relies on bindings generated by the Mopro CLI.
To learn how to build Mopro bindings, refer to the [Getting Started](https://zkmopro.org/docs/getting-started) section.

Use `mopro-cli` and choose `noir`

```sh
mopro init
```

choose `noir`

```sh
mopro build
```

choose `android` and build for `aarch64-linux-android` and `x86_64-linux-android` architectures.

Then, replace the entire bindings directory with your generated files in the following location:

-   `android/app/src/main/java/uniffi`
-   `android/app/src/main/jniLibs`

Alternatively, you can run the following commands to copy your generated bindings into the correct location:

```sh
cp -r MoproAndroidBindings/uniffi android/app/src/main/java
cp -r MoproAndroidBindings/jniLibs android/app/src/main
```

## Community

-   X account: <a href="https://twitter.com/zkmopro"><img src="https://img.shields.io/twitter/follow/zkmopro?style=flat-square&logo=x&label=zkmopro"></a>
-   Telegram group: <a href="https://t.me/zkmopro"><img src="https://img.shields.io/badge/telegram-@zkmopro-blue.svg?style=flat-square&logo=telegram"></a>

## Acknowledgements

This work was initially sponsored by a joint grant from [PSE](https://pse.dev/) and [0xPARC](https://0xparc.org/). It is currently incubated by PSE.
